  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SusuPay - Login</title>
</head>
<body>
    <!-- Authentication Container -->
    <div class="auth-container" id="auth-container">
        <div class="logo">🏦</div>
        <h1 class="auth-title">SusuPay</h1>
        <p class="auth-subtitle">Professional Daily Savings</p>

        <div id="alert-container"></div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Processing...</p>
        </div>

        <!-- Sign In Form -->
        <form id="signin-form">
            <div class="form-group">
                <label for="signin-email">Email Address</label>
                <input type="email" id="signin-email" required>
            </div>

            <div class="form-group">
                <label for="signin-password">Password</label>
                <input type="password" id="signin-password" required>
            </div>

            <button type="submit" class="btn" id="signin-submit-btn">
                Sign In
            </button>
        </form>

        <!-- Sign Up Form (initially hidden) -->
        <form id="signup-form" style="display: none;">
            <div class="form-row">
                <div class="form-group">
                    <label for="first-name">First Name *</label>
                    <input type="text" id="first-name" required>
                </div>
                <div class="form-group">
                    <label for="surname">Surname *</label>
                    <input type="text" id="surname" required>
                </div>
            </div>

            <div class="form-group">
                <label for="middle-name">Middle Name (Optional)</label>
                <input type="text" id="middle-name">
            </div>

            <div class="form-group">
                <label for="signup-email">Email Address *</label>
                <input type="email" id="signup-email" required>
            </div>

            <div class="form-group">
                <label for="country">Country *</label>
                <select id="country" required>
                    <option value="">Select your country</option>
                    <option value="US" data-code="+1">🇺🇸 United States (+1)</option>
                    <option value="GB" data-code="+44">🇬🇧 United Kingdom (+44)</option>
                    <option value="GH" data-code="+233">🇬🇭 Ghana (+233)</option>
                    <option value="NG" data-code="+234">🇳🇬 Nigeria (+234)</option>
                    <option value="KE" data-code="+254">🇰🇪 Kenya (+254)</option>
                    <option value="ZA" data-code="+27">🇿🇦 South Africa (+27)</option>
                    <option value="CA" data-code="+1">🇨🇦 Canada (+1)</option>
                    <option value="AU" data-code="+61">🇦🇺 Australia (+61)</option>
                    <option value="DE" data-code="+49">🇩🇪 Germany (+49)</option>
                    <option value="FR" data-code="+33">🇫🇷 France (+33)</option>
                    <option value="IT" data-code="+39">🇮🇹 Italy (+39)</option>
                    <option value="ES" data-code="+34">🇪🇸 Spain (+34)</option>
                    <option value="BR" data-code="+55">🇧🇷 Brazil (+55)</option>
                    <option value="MX" data-code="+52">🇲🇽 Mexico (+52)</option>
                    <option value="AR" data-code="+54">🇦🇷 Argentina (+54)</option>
                    <option value="IN" data-code="+91">🇮🇳 India (+91)</option>
                    <option value="CN" data-code="+86">🇨🇳 China (+86)</option>
                    <option value="JP" data-code="+81">🇯🇵 Japan (+81)</option>
                    <option value="KR" data-code="+82">🇰🇷 South Korea (+82)</option>
                    <option value="SG" data-code="+65">🇸🇬 Singapore (+65)</option>
                    <option value="MY" data-code="+60">🇲🇾 Malaysia (+60)</option>
                    <option value="TH" data-code="+66">🇹🇭 Thailand (+66)</option>
                    <option value="PH" data-code="+63">🇵🇭 Philippines (+63)</option>
                    <option value="ID" data-code="+62">🇮🇩 Indonesia (+62)</option>
                    <option value="VN" data-code="+84">🇻🇳 Vietnam (+84)</option>
                    <option value="EG" data-code="+20">🇪🇬 Egypt (+20)</option>
                    <option value="MA" data-code="+212">🇲🇦 Morocco (+212)</option>
                    <option value="TN" data-code="+216">🇹🇳 Tunisia (+216)</option>
                    <option value="ET" data-code="+251">🇪🇹 Ethiopia (+251)</option>
                    <option value="UG" data-code="+256">🇺🇬 Uganda (+256)</option>
                    <option value="TZ" data-code="+255">🇹🇿 Tanzania (+255)</option>
                    <option value="RW" data-code="+250">🇷🇼 Rwanda (+250)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number *</label>
                <div class="phone-input-group">
                    <select id="phone-code" class="country-select" required>
                        <option value="">Code</option>
                    </select>
                    <input type="tel" id="phone" class="phone-input" placeholder="123456789" required>
                </div>
            </div>

            <div class="form-group">
                <label for="signup-password">Password *</label>
                <input type="password" id="signup-password" required minlength="6">
            </div>

            <div class="form-group">
                <label for="confirm-password">Confirm Password *</label>
                <input type="password" id="confirm-password" required minlength="6">
            </div>

            <button type="submit" class="btn" id="signup-submit-btn">
                Create Account
            </button>
        </form>

        <button class="btn btn-google" id="google-signin-btn">
            <span>🔍</span>
            Continue with Google
        </button>

        <div class="auth-toggle">
            <span id="auth-toggle-text">Don't have an account?</span>
            <button type="button" id="auth-toggle-btn">Sign Up</button>
        </div>
    </div>

    <!-- Email Verification Container -->
    <div class="auth-container verification-container" id="verification-container">
        <div class="verification-icon">📧</div>
        <h2 class="verification-title">Verify Your Email</h2>
        <p class="verification-text">
            We've sent a verification link to <strong id="verification-email"></strong>. 
            Please check your email and click the link to verify your account.
        </p>
        <p class="verification-text">
            Didn't receive the email? Check your spam folder or click below to resend.
        </p>
        <button class="resend-btn" id="resend-verification-btn">Resend Verification Email</button>
        <div style="margin-top: 20px;">
            <button type="button" id="back-to-login-btn" class="auth-toggle" style="background: none; border: none; color: #667eea; text-decoration: underline;">
                Back to Login
            </button>
        </div>
        <div style="margin-top: 20px;">
            <button type="button" id="check-verification-btn" class="btn" style="background: #38a169; color: #fff; padding: 10px 20px;">
                I've verified my email
            </button>
        </div>
    </div>

    <!-- Dashboard Container -->
    <div class="dashboard-container" id="dashboard-container">
        <div class="dashboard-controls">
            <button class="settings-btn tooltip" id="settings-btn" data-tooltip="Settings">⚙️</button>
            <button class="report-btn tooltip" id="report-btn" data-tooltip="Report a Problem">❗</button>
        </div>
        
        <div class="dashboard-header">
            <div>
                <h1>🏦 SusuPay</h1>
                <p>Professional Daily Savings & Contribution Management</p>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="user-avatar">U</div>
                <div>
                    <div id="user-display-name">User</div>
                    <div id="user-email" style="font-size: 0.9rem; color: #718096;"></div>
                    <div id="kyc-status-indicator" style="font-size: 0.8rem; font-weight: 600;"></div>
                </div>
                <button class="logout-btn" id="logout-btn">Logout</button>
            </div>
        </div>

        <!-- KYC Banner -->
        <div class="kyc-banner" id="kyc-banner">
            <h3>🛡️ Complete Your KYC Verification</h3>
            <p>Verify your identity to unlock full access to SusuPay features and higher transaction limits.</p>
            <button class="kyc-btn" id="start-kyc-btn">Start KYC Process</button>
        </div>

        <div id="dashboard-alert-container"></div>

        <div class="dashboard">
            <div class="user-panel">
                <h2>👤 User Dashboard</h2>
                
                <div class="stats">
                    <div class="stat-card">
                        <h3 id="total-balance">₵0</h3>
                        <p>Total Balance</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="daily-rate">₵0</h3>
                        <p>Daily Rate</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="month-progress">0%</h3>
                        <p>Month Progress</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="daily-rate-input">💰 Set Monthly Rate (GH₵)</label>
                    <input type="number" id="daily-rate-input" placeholder="e.g., 10" min="1">
                </div>
                <button class="btn" onclick="setUserRate()" id="set-rate-btn">Set Rate for <span id="current-month-name">This Month</span></button>
            
                
                <div id="rate-lock-notice" class="rate-lock-notice" style="display: none;">
                    <div>🔒 Rate is locked for <span id="locked-month-name"></span></div>
                    <div style="font-size: 0.9rem; margin-top: 5px;">You can change your rate next month</div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label for="withdrawal-amount">💸 Withdrawal Amount (GH₵)</label>
                    <input type="number" id="withdrawal-amount" placeholder="Amount to withdraw" min="1">
                </div>

                <button class="btn btn-withdraw" onclick="processWithdrawal()">Process Withdrawal</button>
            </div>

            <div class="contribution-area">
                <h2>📅 Monthly Contributions</h2>
                
                <div class="month-selector">
                    <div class="month-btn active" onclick="selectMonth(0)">Jan</div>
                    <div class="month-btn" onclick="selectMonth(1)">Feb</div>
                    <div class="month-btn" onclick="selectMonth(2)">Mar</div>
                    <div class="month-btn" onclick="selectMonth(3)">Apr</div>
                    <div class="month-btn" onclick="selectMonth(4)">May</div>
                    <div class="month-btn" onclick="selectMonth(5)">Jun</div>
                    <div class="month-btn" onclick="selectMonth(6)">Jul</div>
                    <div class="month-btn" onclick="selectMonth(7)">Aug</div>
                    <div class="month-btn" onclick="selectMonth(8)">Sep</div>
                    <div class="month-btn" onclick="selectMonth(9)">Oct</div>
                    <div class="month-btn" onclick="selectMonth(10)">Nov</div>
                    <div class="month-btn" onclick="selectMonth(11)">Dec</div>
                </div>

                <div id="current-month-display">
                    <h3>January 2025</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="month-progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="contribution-grid" id="contribution-grid">
                    <!-- Days will be populated by JavaScript -->
                </div>

                <button class="btn" onclick="contributeToday()" id="contribute-btn">
                    💰 Contribute Today (₵<span id="contribute-amount">0</span>)
                </button>
                 <button class="btn" onclick="contributeToday()" id="contribute-btn">
                    💰 Contribute Previous Days (₵<span id="contribute-amount">0</span>)
                </button>

                <div class="custom-contribution-section">
                    <h4>📊 Custom Contribution Amount</h4>
                    <p style="color: #718096; margin-bottom: 15px;">Contribute a custom amount that can cover multiple days</p>
                    
                    <div class="custom-amount-input">
                        <input type="number" id="custom-amount-input" placeholder="Enter amount" min="1" oninput="calculateDaysCoverage()">
                        <button onclick="contributeCustomAmount()" id="custom-contribute-btn">Contribute</button>
                    </div>

                    <div id="days-coverage" class="days-coverage-display" style="display: none;">
                        This amount will cover <strong id="coverage-days">0</strong> days of contribution
                    </div>
                </div>
            </div>
        </div>

        <div class="transaction-history">
            <h2>📊 Transaction History</h2>
            <div id="transactions-list">
                <p style="text-align: center; color: #718096; padding: 20px;">No transactions yet. Start contributing to see your history here!</p>
            </div>
        </div>
    </div>

    <!-- KYC Modal -->
    <div class="kyc-modal" id="kyc-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-kyc-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title">🛡️ KYC Verification</h2>
                <p class="modal-subtitle">Complete your identity verification to secure your account</p>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="id-verification">📄 ID Verification</button>
                <button class="nav-tab" data-tab="selfie-verification">📸 Selfie Verification</button>
                <button class="nav-tab" data-tab="review">✅ Review</button>
            </div>

            <!-- ID Verification Tab -->
            <div class="tab-content active" id="id-verification">
                <div class="kyc-step" id="front-id-step">
                    <div class="kyc-step-header">
                        <div class="step-number" id="front-step-number">1</div>
                        <div class="step-title">Upload Front of ID</div>
                    </div>
                    <p style="color: #718096; margin-bottom: 15px;">
                        Upload a clear photo of the front of your government-issued ID (Driver's License, Passport, or National ID)
                    </p>
                    
                    <div class="file-upload-area" id="front-id-upload">
                        <div class="upload-icon">📷</div>
                        <div class="upload-text">Click to upload or drag and drop</div>
                        <div class="upload-subtext">PNG, JPG up to 10MB</div>
                    </div>
                    
                    <div class="file-preview" id="front-id-preview">
                        <img id="front-id-image" alt="Front ID Preview">
                        <p><strong>Front ID uploaded successfully!</strong></p>
                    </div>
                    
                    <input type="file" id="front-id-input" accept="image/*" style="display: none;">
                </div>

                <div class="kyc-step" id="back-id-step">
                    <div class="kyc-step-header">
                        <div class="step-number" id="back-step-number">2</div>
                        <div class="step-title">Upload Back of ID</div>
                    </div>
                    <p style="color: #718096; margin-bottom: 15px;">
                        Upload a clear photo of the back of your government-issued ID
                    </p>
                    
                    <div class="file-upload-area" id="back-id-upload">
                        <div class="upload-icon">📷</div>
                        <div class="upload-text">Click to upload or drag and drop</div>
                        <div class="upload-subtext">PNG, JPG up to 10MB</div>
                    </div>
                    
                    <div class="file-preview" id="back-id-preview">
                        <img id="back-id-image" alt="Back ID Preview">
                        <p><strong>Back ID uploaded successfully!</strong></p>
                    </div>
                    
                    <input type="file" id="back-id-input" accept="image/*" style="display: none;">
                </div>
            </div>

            <!-- Selfie Verification Tab -->
            <div class="tab-content" id="selfie-verification" style="display: none;">
                <div class="kyc-step" id="selfie-step">
                    <div class="kyc-step-header">
                        <div class="step-number" id="selfie-step-number">3</div>
                        <div class="step-title">Live Selfie Verification</div>
                    </div>
                    <p style="color: #718096; margin-bottom: 15px;">
                        Take a live selfie following the on-screen instructions to complete verification
                    </p>

                    <div class="live-action" id="live-action-prompt">
                        <div class="action-text">Please look straight into the camera</div>
                    </div>

                    <div class="camera-container">
                        <video class="camera-video" id="selfie-video" autoplay playsinline></video>
                        <canvas id="selfie-canvas" style="display: none;"></canvas>
                        
                        <div class="camera-controls">
                            <button class="camera-btn" id="start-camera-btn">Start Camera</button>
                            <button class="camera-btn" id="capture-selfie-btn" style="display: none;">Take Photo</button>
                            <button class="camera-btn" id="retake-selfie-btn" style="display: none;">Retake</button>
                        </div>
                    </div>

                    <div class="file-preview" id="selfie-preview">
                        <img id="selfie-image" alt="Selfie Preview">
                        <p><strong>Selfie captured successfully!</strong></p>
                    </div>
                </div>
            </div>

            <!-- Review Tab -->
            <div class="tab-content" id="review" style="display: none;">
                <div class="kyc-step">
                    <div class="kyc-step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">Review & Submit</div>
                    </div>
                    
                    <div id="kyc-review-content">
                        <p style="color: #718096; margin-bottom: 20px;">
                            Please review your uploaded documents before submitting for verification.
                        </p>
                        
                        <div class="verification-status" id="kyc-submission-status">
                            <div>📋 Ready for submission</div>
                        </div>

                        <button class="btn" id="submit-kyc-btn" style="width: 100%;">
                            Submit for Verification
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settings-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-settings-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title">⚙️ Account Settings</h2>
                <p class="modal-subtitle">Manage your account preferences and personal information</p>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="profile-settings">👤 Profile</button>
                <button class="nav-tab" data-tab="security-settings">🔒 Security</button>
                <button class="nav-tab" data-tab="preferences-settings">⚙️ Preferences</button>
            </div>

            <!-- Profile Settings -->
            <div class="tab-content active" id="profile-settings">
                <div class="settings-section">
                    <div class="settings-title">
                        <span>👤</span> Personal Information
                    </div>
                    
                    <form id="profile-update-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-first-name">First Name</label>
                                <input type="text" id="edit-first-name">
                            </div>
                            <div class="form-group">
                                <label for="edit-surname">Surname</label>
                                <input type="text" id="edit-surname">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="edit-middle-name">Middle Name (Optional)</label>
                            <input type="text" id="edit-middle-name">
                        </div>

                        <div class="form-group">
                            <label for="edit-email-display">Email Address</label>
                            <input type="email" id="edit-email-display" disabled>
                            <small style="color: #718096;">Email cannot be changed after registration</small>
                        </div>

                        <div class="form-group">
                            <label for="edit-country-display">Country</label>
                            <select id="edit-country-display">
                                <option value="">Select your country</option>
                                <option value="US" data-code="+1">🇺🇸 United States (+1)</option>
                                <option value="GB" data-code="+44">🇬🇧 United Kingdom (+44)</option>
                                <option value="GH" data-code="+233">🇬🇭 Ghana (+233)</option>
                                <option value="NG" data-code="+234">🇳🇬 Nigeria (+234)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="edit-phone">Phone Number</label>
                            <input type="tel" id="edit-phone">
                        </div>

                        <button type="submit" class="btn">Update Profile</button>
                    </form>
                </div>
            </div>

            <!-- Security Settings -->
            <div class="tab-content" id="security-settings" style="display: none;">
                <div class="settings-section">
                    <div class="settings-title">
                        <span>🔒</span> Change Password
                    </div>
                    
                    <form id="password-update-form">
                        <div class="form-group">
                            <label for="current-password">Current Password</label>
                            <input type="password" id="current-password" required>
                        </div>

                        <div class="form-group">
                            <label for="new-password">New Password</label>
                            <input type="password" id="new-password" required minlength="6">
                        </div>

                        <div class="form-group">
                            <label for="confirm-new-password">Confirm New Password</label>
                            <input type="password" id="confirm-new-password" required minlength="6">
                        </div>

                        <button type="submit" class="btn">Update Password</button>
                    </form>
                </div>

                <div class="settings-section">
                    <div class="settings-title">
                        <span>🛡️</span> Account Security
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f7fafc; border-radius: 10px;">
                        <div>
                            <div style="font-weight: 600; color: #4a5568;">KYC Verification Status</div>
                            <div style="color: #718096; font-size: 0.9rem;" id="settings-kyc-status">Pending verification</div>
                        </div>
                        <button class="btn" id="open-kyc-from-settings" style="padding: 8px 15px; font-size: 0.9rem;">
                            Verify Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preferences Settings -->
            <div class="tab-content" id="preferences-settings" style="display: none;">
                <div class="settings-section">
                    <div class="settings-title">
                        <span>📧</span> Notifications
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="email-notifications" checked>
                            <span>Email notifications for transactions</span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="daily-reminders" checked>
                            <span>Daily contribution reminders</span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="security-alerts" checked>
                            <span>Security and login alerts</span>
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-title">
                        <span>🌍</span> Regional Settings
                    </div>
                    
                    <div class="form-group">
                        <label for="currency-preference">Preferred Currency Display</label>
                        <select id="currency-preference">
                            <option value="GHS">🇬🇭 Ghanaian Cedi (₵)</option>
                            <option value="USD">🇺🇸 US Dollar ($)</option>
                            <option value="EUR">🇪🇺 Euro (€)</option>
                            <option value="GBP">🇬🇧 British Pound (£)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="language-preference">Language</label>
                        <select id="language-preference">
                            <option value="en">🇺🇸 English</option>
                            <option value="tw">🇬🇭 Twi</option>
                            <option value="fr">🇫🇷 French</option>
                            <option value="es">🇪🇸 Spanish</option>
                        </select>
                    </div>
                    
                    <button class="btn" id="save-preferences-btn">Save Preferences</button>
                </div>

                <div class="settings-section">
                    <div class="settings-title">
                        <span>⚠️</span> Danger Zone
                    </div>
                    
                    <div style="padding: 20px; background: #fed7d7; border: 1px solid #feb2b2; border-radius: 10px; color: #742a2a;">
                        <div style="font-weight: 600; margin-bottom: 10px;">Delete Account</div>
                        <div style="margin-bottom: 15px; font-size: 0.9rem;">
                            Once you delete your account, there is no going back. Please be certain.
                        </div>
                        <button class="btn" id="delete-account-btn" style="background: #e53e3e; width: auto; padding: 10px 20px;">
                            Delete Account
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Problem Modal -->
    <div class="modal" id="report-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Report a Problem</h2>
                <button class="close-btn" id="close-report-modal">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="report-problem-form">
                    <div class="form-group">
                        <label for="problem-category">Problem Category *</label>
                        <select id="problem-category" required>
                            <option value="">Select a category</option>
                            <option value="login">Login/Authentication Issues</option>
                            <option value="transaction">Transaction Problems</option>
                            <option value="kyc">KYC Verification Issues</option>
                            <option value="technical">Technical Problems</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="problem-description">Describe the Problem *</label>
                        <textarea id="problem-description" rows="5" required 
                            placeholder="Please provide as much detail as possible about the problem you're experiencing..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="problem-screenshot">Screenshot (Optional)</label>
                        <div class="file-upload-area" id="screenshot-upload">
                            <input type="file" id="screenshot-input" accept="image/*" style="display: none;">
                            <div class="upload-text">
                                <span>📸 Click or drag to upload screenshot</span>
                                <small>Max file size: 5MB</small>
                            </div>
                        </div>
                        <div id="screenshot-preview" style="display: none;">
                            <img id="screenshot-image" src="" alt="Screenshot preview">
                            <button type="button" class="remove-btn" id="remove-screenshot">Remove</button>
                        </div>
                    </div>

                    <button type="submit" class="btn">Submit Report</button>
                </form>
            </div>
        </div>
    </div>
<script type="module" src="admin-dashboard.js">
</body>
</html>    
